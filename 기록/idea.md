# 📄 스터디 매칭 웹 서비스

## 1. 프로젝트 식별 및 개요

| 항목 | 내용 |
| :--- | :--- |
| **프로젝트명** | 스터디 매칭 웹 서비스 (가칭: StudyHub) |
| **최종 목표** | 사용자의 **지리적 위치** 및 **관심 기술**을 기반으로 최적의 스터디 그룹을 매칭하고, **안정적인 실시간 소통 및 알림 환경**을 제공하는 웹 플랫폼 개발. |
| **핵심 사용자** | 새로운 기술을 학습하고자 하는 개발자 및 학생. |
| **사용 기술 스택** | **FE: React** / **BE: Spring Boot, Spring Security, QueryDSL** / **DB: PostgreSQL (w/ PostGIS)** / **통신: WebSocket, Web Push** |

---

## 2. 시스템 아키텍처 및 환경 구성

### 2.1. 고수준 아키텍처 
* **클라이언트 계층:** React 기반의 SPA(Single Page Application)로, REST API 및 WebSocket을 통해 서버와 통신합니다.
* **API 계층:** Spring Boot 기반으로, 모든 비즈니스 로직과 데이터 검증을 수행합니다.
* **데이터 계층:** PostgreSQL을 사용하며, **PostGIS 확장**을 통해 위치 데이터를 관리하고 공간 쿼리를 처리합니다.

### 2.2. 개발/배포 환경
* **컨테이너:** **Docker**를 사용하여 Spring Boot 애플리케이션과 PostgreSQL DB를 격리하고 관리합니다.
* **인프라:** GCP Compute Engine (또는 유사 클라우드)에 배포하여 운영 환경을 구축합니다.

---

## 3. 기능 요구사항 (Functional Requirements)

| 대분류 | 세부 기능 | 요구사항 상세 | 핵심 기술 |
| :--- | :--- | :--- | :--- |
| **사용자 & 보안** | 회원가입/로그인 | 이메일 기반 인증 및 **JWT**를 활용한 무상태(Stateless) 인증 구현. | Spring Security |
| | 프로필 관리 | 사용자 기본 정보 및 **관심 기술 스택** 등록/수정 기능 제공. | React, Spring Data JPA |
| **스터디 모집** | 스터디 등록 (CRUD) | 스터디 제목, 내용, **모집 위치(주소/좌표)**, 기술 태그, 정원 설정. | PostgreSQL (PostGIS) |
| | 스터디 참여 | 사용자가 스터디에 참여 신청하고, 스터디장이 신청을 수락/거절하는 로직 구현. | Spring `Transactional` |
| **검색 & 필터** | 복합 검색 | 키워드, 기술 스택 태그, 모집 상태 등 **다중 조건**을 조합하여 검색. | **QueryDSL** |
| | 위치 기반 검색 | 현재 위치를 기준으로 **반경 X km 이내**의 스터디 목록을 조회. | **PostGIS + QueryDSL** |
| **실시간 소통** | 1:1 채팅 & 그룹 채팅 | 스터디원 간의 실시간 메시지 전송. | **WebSocket (STOMP)** |
| | 인앱 알림 | 서비스 이용 중 신청/수락 등 이벤트 발생 시 즉시 알림 표시. | WebSocket |
| **오프라인 알림** | 푸시 알림 | 브라우저/PC 종료 시 중요한 알림을 **OS 레벨**에서 팝업으로 전달. | **Web Push Notification** |

---

## 4. 기술적 도전 과제 및 해결 방안 (Technical Design)

이 프로젝트의 차별화된 세 가지 핵심 기술에 대한 설계 방안입니다.

### 4.1. 🌍 위치 기반 검색 최적화 설계

* **문제:** 일반 RDBMS에서 위도/경도를 사용한 거리 계산은 비효율적이며 복잡합니다.
* **해결:**
    1.  PostgreSQL에 **PostGIS 확장**을 설치하여 공간 분석 기능을 활성화합니다.
    2.  스터디 위치 정보를 `GEOMETRY` 타입으로 저장하고, **공간 인덱스**를 생성하여 검색 속도를 최적화합니다.
    3.  Spring Boot 백엔드에서 **QueryDSL**을 통해 PostGIS 함수를 호출하여 **효율적인 거리 기반 쿼리**를 실행합니다.

### 4.2. 🔎 동적 복합 검색 API 설계

* **문제:** 검색 조건(위치, 키워드, 태그 등)이 가변적일 때, SQL 쿼리를 동적으로 생성하고 관리하기 어렵습니다.
* **해결:**
    1.  **QueryDSL**을 도입하여 동적 쿼리를 작성합니다.
    2.  각 검색 조건(태그, 모집 상태 등)을 **`BooleanExpression`** 객체로 변환하고, 입력 값이 있는 경우에만 **`where()`** 절에 체이닝하여 최종 쿼리를 구성합니다.
    3.  이를 통해 코드가 간결해지고 **유지보수가 용이한** 검색 API를 제공합니다.

### 4.3. 📢 웹 푸시 알림 시스템 설계

* **문제:** 사용자가 웹을 닫거나 오프라인일 때 알림을 전달할 수 없습니다.
* **해결:**
    1.  **VAPID** 표준을 사용하여 Spring Boot 서버에서 푸시 알림 요청을 인증합니다.
    2.  React 클라이언트가 생성한 **구독 정보(Endpoint URL, Key)** 를 서버 DB에 저장합니다.
    3.  알림 이벤트 발생 시, 서버가 저장된 구독 정보를 사용해 **외부 푸시 서비스** (예: FCM)에 암호화된 메시지를 요청하여 사용자 브라우저의 **Service Worker**를 통해 알림을 전달합니다.